app.controller("TourController",function(t,r,o){r.get("/tour/indexApi").success(function(r){t.data=r}),t.add=!0,t.addTour=function(){$(".tourForm").addClass("display"),t.add=!0},t.cancel=function(){$(".popUp").removeClass("display")},t.postNew=function(){r.post("/tour",t.cur).success(function(r){t.data.push(r),swal("Thêm thành công tour mới","","success")}).error(function(t){swal({title:"<b>Không thể thêm tour mới</b>",text:o.arrayToList(t),html:!0,type:"error"})}),$(".popUp").removeClass("display")},t.delete=function(n){confirm("Bạn có muốn xóa tour này?")&&r.delete("/tour/"+n.id).success(function(){t.data.splice(t.data.indexOf(n),1),swal("Xóa thành công","","success")}).error(function(t){swal({title:"<b>Có lỗi xảy ra, không thể xóa tour này</b>",text:o.arrayToList(t),html:!0,type:"error"})})},t.edit=function(r){jQuery(".tourForm").addClass("display"),t.add=!1,t.cur=r},t.update=function(){r.put("/tour/"+t.cur.id,t.cur).success(function(r){for(var o=0;o<t.data.length;o++)t.data[o].id==t.id&&(t.data[o]=t.cur);jQuery(".popUp").removeClass("display"),swal("Cập nhật thành công tour "+r.tentour,"","success")}).error(function(t){swal({title:"<b>Lỗi! Không thể cập nhật</b>",text:o.arrayToList(t),html:!0,type:"error"})})},t.search=function(){r.post("/tour/search",t.find).success(function(r){t.data=r}).error(function(){swal("Lỗi kết nối","","error")})}});